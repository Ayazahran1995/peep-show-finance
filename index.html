<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Learn about finance terms with a humorous twist. Understanding financial concepts through relatable scenarios and witty explanations.">
    <meta name="keywords" content="finance terms, financial education, money management, financial literacy, finance explained">
    <meta name="author" content="Your Name">
    <meta name="theme-color" content="#3533cd">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Finance Explained, But With More Despair">
    <meta property="og:description" content="Learn about finance terms with a humorous twist. Understanding financial concepts through relatable scenarios.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="[Your Website URL]">
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="PPNeueMachina-Regular.otf" as="font" type="font/otf" crossorigin>
    <link rel="preload" href="PPNeueMachina-Bold.otf" as="font" type="font/otf" crossorigin>
    
    <title>ï¿½ï¿½ Finance Explained, But With More Despair</title>

    <style>
        /* Your existing styles remain the same */
        /* Add these new accessibility and performance styles */

        /* Accessibility Improvements */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        /* Focus Styles */
        button:focus,
        .term-container:focus {
            outline: 2px solid #fff;
            outline-offset: 2px;
        }

        /* High Contrast Mode Support */
        @media (forced-colors: active) {
            .term-container {
                border: 2px solid CanvasText;
            }
            
            .cta-buttons button {
                border: 2px solid CanvasText;
            }
        }

        /* Reduced Motion Preference */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
                scroll-behavior: auto !important;
            }
        }

        /* Loading State */
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            border: 2px solid #fff;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <main role="main">
        <h1>ðŸ’¸ Finance Explained, But With More Despair</h1>

        <div class="term-container" 
             id="term-container"
             role="region" 
             aria-live="polite"
             aria-label="Financial term display">
            <div class="term-emoji" id="term-emoji" aria-hidden="true">ðŸ’¸</div>
            <div class="term" id="term">Loading misery...</div>
            <div class="explanation" id="explanation">Please hold. Doom is buffering.</div>
            <div class="scenario" id="scenario">*Awkward scenario loading...*</div>
        </div>

        <div id="doom-counter" role="status">Doom Level: <span id="doom-count">0</span> - <span id="doom-message">Welcome to Despair.</span></div>
        <div id="progress" role="status">Seen <span id="seen-count">0</span>/<span id="total-terms">12</span> terms. Keep going!</div>
        <div id="achievements" role="status">Achievements: <span id="achievement-list">None yet. Keep clicking.</span></div>

        <div class="cta-buttons">
            <button id="generate-btn" 
                    onclick="generateTerm()"
                    aria-label="Generate new financial term">
                Make It Worse
            </button>
        </div>
    </main>

    <!-- Your existing JavaScript with these additions -->
    <script>
        // Your existing variables and functions remain the same

        // Add keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' || e.code === 'Enter') {
                e.preventDefault();
                generateTerm();
            }
        });

        // Add loading state handling
        function setLoading(isLoading) {
            const button = document.getElementById('generate-btn');
            if (isLoading) {
                button.classList.add('loading');
                button.setAttribute('aria-busy', 'true');
            } else {
                button.classList.remove('loading');
                button.setAttribute('aria-busy', 'false');
            }
        }

        // Update generateTerm function with loading state
        async function generateTerm() {
            if (buttonLocked) return;
            buttonLocked = true;
            setLoading(true);

            const container = document.getElementById('term-container');
            
            // Fade out
            container.style.opacity = '0';
            
            try {
                setTimeout(() => {
                    if (termsQueue.length === 0) {
                        termsQueue = [...financeTerms];
                    }

                    const randomIndex = Math.floor(Math.random() * termsQueue.length);
                    const termData = termsQueue.splice(randomIndex, 1)[0];

                    // Update content
                    document.getElementById("term").textContent = termData.term;
                    document.getElementById("explanation").textContent = termData.explanation;
                    document.getElementById("scenario").textContent = scenarios[termData.term] || "No scenario found, but life is still tough.";
                    document.getElementById("term-emoji").textContent = termData.emoji;

                    // Fade in
                    container.style.opacity = '1';

                    // Update counters
                    doomCount++;
                    seenCount++;
                    updateDoomCounter();
                    updateProgress();
                    checkAchievements();

                }, 300);
            } catch (error) {
                console.error('Error generating term:', error);
                alert('Something went wrong. Please try again.');
            } finally {
                setTimeout(() => {
                    buttonLocked = false;
                    setLoading(false);
                }, 500);
            }
        }

        // Add error handling for font loading
        document.fonts.ready.then(() => {
            document.body.classList.add('fonts-loaded');
        }).catch(error => {
            console.error('Error loading fonts:', error);
        });

        // Add service worker registration
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(console.error);
        }

        // Initialize first term
        document.addEventListener('DOMContentLoaded', () => {
            generateTerm();
        });
    </script>

    <!-- Add structured data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Finance Explained, But With More Despair",
        "description": "Learn about finance terms with a humorous twist. Understanding financial concepts through relatable scenarios.",
        "applicationCategory": "EducationalApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
</body>
</html>

